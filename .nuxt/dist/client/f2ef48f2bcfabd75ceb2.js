(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{457:function(t,e,r){"use strict";var n={props:{src:{type:String,default:""},height:{type:String,default:"30"}},data:function(){return{error:!1}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.error?r("svg",{attrs:{viewBox:"64 64 896 896","data-icon":"dollar",width:t.height,height:t.height,fill:"currentColor","aria-hidden":"true"}},[r("path",{attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}})]):r("img",{attrs:{src:t.src,height:t.height},on:{error:function(e){t.error=!0}}})},[],!1,null,null,null);e.a=component.exports},459:function(t,e,r){var content=r(591);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(41).default)("1406ad67",content,!0,{sourceMap:!1})},589:function(t,e,r){var map={"./af":462,"./af.js":462,"./ar":463,"./ar-dz":464,"./ar-dz.js":464,"./ar-kw":465,"./ar-kw.js":465,"./ar-ly":466,"./ar-ly.js":466,"./ar-ma":467,"./ar-ma.js":467,"./ar-sa":468,"./ar-sa.js":468,"./ar-tn":469,"./ar-tn.js":469,"./ar.js":463,"./az":470,"./az.js":470,"./be":471,"./be.js":471,"./bg":472,"./bg.js":472,"./bm":473,"./bm.js":473,"./bn":474,"./bn.js":474,"./bo":475,"./bo.js":475,"./br":476,"./br.js":476,"./bs":477,"./bs.js":477,"./ca":478,"./ca.js":478,"./cs":479,"./cs.js":479,"./cv":480,"./cv.js":480,"./cy":481,"./cy.js":481,"./da":482,"./da.js":482,"./de":483,"./de-at":484,"./de-at.js":484,"./de-ch":485,"./de-ch.js":485,"./de.js":483,"./dv":486,"./dv.js":486,"./el":487,"./el.js":487,"./en-SG":488,"./en-SG.js":488,"./en-au":489,"./en-au.js":489,"./en-ca":490,"./en-ca.js":490,"./en-gb":491,"./en-gb.js":491,"./en-ie":492,"./en-ie.js":492,"./en-il":493,"./en-il.js":493,"./en-nz":494,"./en-nz.js":494,"./eo":495,"./eo.js":495,"./es":496,"./es-do":497,"./es-do.js":497,"./es-us":498,"./es-us.js":498,"./es.js":496,"./et":499,"./et.js":499,"./eu":500,"./eu.js":500,"./fa":501,"./fa.js":501,"./fi":502,"./fi.js":502,"./fo":503,"./fo.js":503,"./fr":504,"./fr-ca":505,"./fr-ca.js":505,"./fr-ch":506,"./fr-ch.js":506,"./fr.js":504,"./fy":507,"./fy.js":507,"./ga":508,"./ga.js":508,"./gd":509,"./gd.js":509,"./gl":510,"./gl.js":510,"./gom-latn":511,"./gom-latn.js":511,"./gu":512,"./gu.js":512,"./he":513,"./he.js":513,"./hi":514,"./hi.js":514,"./hr":515,"./hr.js":515,"./hu":516,"./hu.js":516,"./hy-am":517,"./hy-am.js":517,"./id":518,"./id.js":518,"./is":519,"./is.js":519,"./it":520,"./it-ch":521,"./it-ch.js":521,"./it.js":520,"./ja":522,"./ja.js":522,"./jv":523,"./jv.js":523,"./ka":524,"./ka.js":524,"./kk":525,"./kk.js":525,"./km":526,"./km.js":526,"./kn":527,"./kn.js":527,"./ko":528,"./ko.js":528,"./ku":529,"./ku.js":529,"./ky":530,"./ky.js":530,"./lb":531,"./lb.js":531,"./lo":532,"./lo.js":532,"./lt":533,"./lt.js":533,"./lv":534,"./lv.js":534,"./me":535,"./me.js":535,"./mi":536,"./mi.js":536,"./mk":537,"./mk.js":537,"./ml":538,"./ml.js":538,"./mn":539,"./mn.js":539,"./mr":540,"./mr.js":540,"./ms":541,"./ms-my":542,"./ms-my.js":542,"./ms.js":541,"./mt":543,"./mt.js":543,"./my":544,"./my.js":544,"./nb":545,"./nb.js":545,"./ne":546,"./ne.js":546,"./nl":547,"./nl-be":548,"./nl-be.js":548,"./nl.js":547,"./nn":549,"./nn.js":549,"./pa-in":550,"./pa-in.js":550,"./pl":551,"./pl.js":551,"./pt":552,"./pt-br":553,"./pt-br.js":553,"./pt.js":552,"./ro":554,"./ro.js":554,"./ru":555,"./ru.js":555,"./sd":556,"./sd.js":556,"./se":557,"./se.js":557,"./si":558,"./si.js":558,"./sk":559,"./sk.js":559,"./sl":560,"./sl.js":560,"./sq":561,"./sq.js":561,"./sr":562,"./sr-cyrl":563,"./sr-cyrl.js":563,"./sr.js":562,"./ss":564,"./ss.js":564,"./sv":565,"./sv.js":565,"./sw":566,"./sw.js":566,"./ta":567,"./ta.js":567,"./te":568,"./te.js":568,"./tet":569,"./tet.js":569,"./tg":570,"./tg.js":570,"./th":571,"./th.js":571,"./tl-ph":572,"./tl-ph.js":572,"./tlh":573,"./tlh.js":573,"./tr":574,"./tr.js":574,"./tzl":575,"./tzl.js":575,"./tzm":576,"./tzm-latn":577,"./tzm-latn.js":577,"./tzm.js":576,"./ug-cn":578,"./ug-cn.js":578,"./uk":579,"./uk.js":579,"./ur":580,"./ur.js":580,"./uz":581,"./uz-latn":582,"./uz-latn.js":582,"./uz.js":581,"./vi":583,"./vi.js":583,"./x-pseudo":584,"./x-pseudo.js":584,"./yo":585,"./yo.js":585,"./zh-cn":586,"./zh-cn.js":586,"./zh-hk":587,"./zh-hk.js":587,"./zh-tw":588,"./zh-tw.js":588};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=o,t.exports=n,n.id=589},590:function(t,e,r){"use strict";var n=r(459);r.n(n).a},591:function(t,e,r){(t.exports=r(40)(!1)).push([t.i,".bordered{border-right:1px solid}.trade-window{min-height:400px}.el-form-item{margin-bottom:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.overflowbox{border:1px solid hsla(0,2%,89%,.7);box-shadow:none}.blist{max-height:200px;overflow:auto;padding:5px 15px;text-align:right}.blist .ltd{position:relative;display:flex;justify-content:center;align-items:center;height:20.6px;line-height:20.6px;overflow:hidden}.blist .ltd:hover{cursor:pointer;font-weight:700}.blist .ltd span{width:40%;font-size:14px}.blist .ltd span:first-child{text-align:left}.display-4{font-size:2.5rem;font-weight:230;line-height:1}",""])},596:function(t,e,r){"use strict";r.r(e);r(31),r(23),r(28),r(24),r(14),r(168);var n=r(52),o=(r(56),r(3)),c=(r(243),r(11)),l=(r(39),r(7)),m=r(72),d=r(457),f={props:{value:{type:Number,default:function(){}}}},h=r(32),k=Object(h.a)(f,function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,j=r(242),y=r(4);function v(object,t){var e=Object.keys(object);return Object.getOwnPropertySymbols&&e.push.apply(e,Object.getOwnPropertySymbols(object)),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e}var x,_,O={props:{market:{type:Object,default:function(){}},eosBalance:{type:String,default:function(){}},tokenBalance:{type:String,default:function(){}}},data:function(){return{eos_amount:0,token_amount:0}},computed:function(t){for(var i=1;i<arguments.length;i++)if(i%2){var source=null!=arguments[i]?arguments[i]:{};v(source,!0).forEach(function(e){Object(c.a)(t,e,source[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[i])):v(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(arguments[i],e))});return t}({},Object(m.b)(["user"])),methods:{update:function(){this.eos_amount=parseFloat(this.eos_amount).toFixed(4),this.token_amount=parseFloat(this.token_amount).toFixed(this.market.token.symbol.precision)},buy:(_=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.chain.scatterConnected){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Please connect Scatter",type:"info"}));case 2:if(e=this.$loading({lock:!0,text:"Wait for Scatter"}),!this.$store.state.chain.scatterConnected||this.$store.state.user){t.next=6;break}return t.next=6,this.$store.dispatch("chain/login");case 6:return t.prev=6,t.next=9,Object(j.transfer)("eosio.token",this.user.name,"".concat(this.eos_amount," EOS"),"".concat(Number(0).toFixed(this.market.token.symbol.precision)," ").concat(this.market.token.str));case 9:r=t.sent,this.$alert('<a href="'.concat(y.a.monitor,"/tx/").concat(r.transaction_id,'" target="_blank">Transaction id</a>'),"Transaction complete!",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",callback:function(t){n.$emit("update")}}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(6),Object(l.captureException)(t.t0,{extra:{order:this.order}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 18:return t.prev=18,e.close(),t.finish(18);case 21:case"end":return t.stop()}},t,this,[[6,13,18,21]])})),function(){return _.apply(this,arguments)}),sell:(x=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.chain.scatterConnected){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Please connect Scatter",type:"info"}));case 2:if(e=this.$loading({lock:!0,text:"Wait for Scatter"}),!this.$store.state.chain.scatterConnected||this.$store.state.user){t.next=6;break}return t.next=6,this.$store.dispatch("chain/login");case 6:return t.prev=6,t.next=9,Object(j.transfer)(this.market.token.contract,this.user.name,"".concat(this.token_amount," ").concat(this.market.token.symbol.name),"0.0000 EOS@eosio.token");case 9:r=t.sent,this.$emit("update"),this.$alert('<a href="'.concat(y.a.monitor,"/tx/").concat(r.transaction_id,'" target="_blank">Transaction id</a>'),"Transaction complete!",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",callback:function(t){}}),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(6),Object(l.captureException)(t.t0,{extra:{order:this.order}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 19:return t.prev=19,e.close(),t.finish(19);case 22:case"end":return t.stop()}},t,this,[[6,14,19,22]])})),function(){return x.apply(this,arguments)})}},w=Object(h.a)(O,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row p-2"},[r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex label mb-3"},[r("span",{staticClass:"text-success"},[t._v("Buy "+t._s(t.market.token.symbol.name))]),r("span",{staticClass:"text-mutted small align-self-end ml-auto"},[t._v("balance: "+t._s(t.eosBalance))])]),r("el-form",{ref:"form",attrs:{"label-width":"60px"}},[r("el-form-item",{attrs:{label:"Price"}},[r("el-input",{attrs:{type:"number",disabled:"",placeholder:"Buy at best price"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{attrs:{label:"Amount"}},[r("el-input",{attrs:{type:"number",clearable:""},on:{change:t.update},model:{value:t.eos_amount,callback:function(e){t.eos_amount=e},expression:"eos_amount"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{staticClass:"mt-5"},[r("el-button",{staticClass:"w-100",attrs:{type:"success"},on:{click:t.buy}},[t._v("Buy "+t._s(t.market.token.str))])],1)],1)],1),r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex label mb-3"},[r("span",{staticClass:"text-danger"},[t._v("Sell "+t._s(t.market.token.symbol.name))]),r("span",{staticClass:"text-mutted small align-self-end ml-auto"},[t._v("balance: "+t._s(t.tokenBalance))])]),r("el-form",{ref:"form",attrs:{"label-width":"60px"}},[r("el-form-item",{attrs:{label:"Price"}},[r("el-input",{attrs:{type:"number",disabled:"",placeholder:"Buy at best price"}},[r("span",{staticClass:"mr-1 ml-2",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{attrs:{label:"Amount"}},[r("el-input",{attrs:{type:"number",clearable:""},on:{change:t.update},model:{value:t.token_amount,callback:function(e){t.token_amount=e},expression:"token_amount"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.market.token.symbol.name))])])],1),r("el-form-item",{staticClass:"mt-5"},[r("el-button",{staticClass:"w-100",attrs:{type:"danger"},on:{click:t.sell}},[t._v("Sell "+t._s(t.market.token.str))])],1)],1)],1)])},[],!1,null,null,null).exports,C=r(458),S=r(456),$=r.n(S);function E(object,t){var e=Object.keys(object);return Object.getOwnPropertySymbols&&e.push.apply(e,Object.getOwnPropertySymbols(object)),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e}var P,z={props:{market:{type:Number,default:0},bids:{type:Array,default:function(){return[]}},asks:{type:Array,default:function(){return[]}}},computed:function(t){for(var i=1;i<arguments.length;i++)if(i%2){var source=null!=arguments[i]?arguments[i]:{};E(source,!0).forEach(function(e){Object(c.a)(t,e,source[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[i])):E(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(arguments[i],e))});return t}({},Object(m.b)(["user"]),{},Object(m.b)("chain",["rpc"]),{orders:function(){var t=this;return this.user?[].concat(Object(C.a)(this.asks),Object(C.a)(this.bids)).filter(function(a){return a.account==t.user.name}).map(function(t){return t.date=$()(t.timestamp).format("DD-MM HH:mm"),t.type="EOS"==t.bid.symbol.symbol?"bid":"ask",t}):[]}}),methods:{cancel:(P=Object(o.a)(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.user){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Pleace login first",type:"info"}));case 2:return r=this.$loading({lock:!0,text:"Wait for Scatter"}),t.prev=3,console.log(this.user.name,this.market,e.type,e.id),t.next=7,Object(j.cancelorder)(this.user.name,this.market,e.type,e.id);case 7:this.$notify({title:"Success",message:"Order cancelled ".concat(e.id),type:"success"}),this.$emit("update"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),Object(l.captureException)(t.t0,{extra:{order:e,market_id:this.market_id}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 16:return t.prev=16,r.close(),t.finish(16);case 19:case"end":return t.stop()}},t,this,[[3,11,16,19]])})),function(t){return P.apply(this,arguments)})}},T=Object(h.a)(z,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"lead"},[t._v("My orders:")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orders}},[r("el-table-column",{attrs:{label:"Type",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return["bid"==e.row.type?r("span",{staticClass:"text-success"},[t._v(t._s(e.row.type))]):r("span",{staticClass:"text-danger"},[t._v(t._s(e.row.type))])]}}])}),r("el-table-column",{attrs:{label:"Date",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),r("el-table-column",{attrs:{label:"Ask",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.ask.quantity))])]}}])}),r("el-table-column",{attrs:{label:"Bid",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.bid.quantity))])]}}])}),r("el-table-column",{attrs:{label:"Price",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("humanFloat")(e.row.unit_price)))])]}}])}),r("el-table-column",{attrs:{label:"Operations",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.cancel(e.row)}}},[t._v("Cancel")])]}}])})],1)],1)},[],!1,null,null,null).exports,B=r(119),F=r(70);function R(object,t){var e=Object.keys(object);return Object.getOwnPropertySymbols&&e.push.apply(e,Object.getOwnPropertySymbols(object)),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e}var A,D,M,I,N,L,H={head:function(){return{title:"".concat(y.a.APP_NAME," | Market ").concat(this.market.token.symbol.name),meta:[{hid:"description",name:"description",content:"Trade ".concat(this.market.token.str," token for EOS")}]}},components:{TokenImage:d.a,AssetImput:k,MarketTrade:w,MyOrders:T},data:function(){var t=this;return{market:{},bids:[],asks:[],price:0,amount:0,no_found:!1,loading:!0,rules:{total:[{trigger:"change",validator:function(e,r,n){t.totalEos<5e-4&&n(new Error("Order amount must be more then 0.01 EOS"))}}]}}},computed:function(t){for(var i=1;i<arguments.length;i++)if(i%2){var source=null!=arguments[i]?arguments[i]:{};R(source,!0).forEach(function(e){Object(c.a)(t,e,source[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[i])):R(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(arguments[i],e))});return t}({},Object(m.b)("chain",["rpc","scatter"]),{},Object(m.b)(["user"]),{eosBalance:function(){if(!this.user||!this.user.balances)return"0.0000";var t=this.user.balances.filter(function(b){return"EOS"==b.currency})[0];return"".concat(t.amount," ").concat(t.currency)},tokenBalance:function(){var t=this;if(!this.user||!this.user.balances)return"0.0000";var e=this.user.balances.filter(function(b){return b.currency==t.market.token.symbol.name&&b.contract==t.market.token.contract})[0];return e?"".concat(e.amount," ").concat(e.currency):Number(0).toFixed(this.market.token.symbol.precision)+" ".concat(this.market.token.symbol.name)},market_id:function(){return parseInt(this.$route.params.id)},wrongPrice:function(){return!(0==this.totalEos||!this.amount||!this.price)&&Object(B.a)(this.amount,4)*Object(B.a)(this.price,8)%y.a.PRICE_SCALE!=0},sorted_asks:function(){return this.asks.slice().sort(B.e)},sorted_bids:function(){return this.bids.slice().sort(B.e)},totalEos:function(){return(this.amount*this.price).toFixed(4)}}),asyncData:(L=Object(o.a)(regeneratorRuntime.mark(function t(e){var r,n,o,c,m,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.error,o=e.params,c=r.getters["chain/rpc"],t.prev=2,t.next=5,c.get_table_rows({code:y.a.contract,scope:y.a.contract,table:"markets",lower_bound:o.id,limit:1});case 5:if((m=t.sent).rows.map(function(t){return t.token=Object(B.d)(t.token)}),!(d=m.rows[0])||d.id!=o.id){t.next=12;break}return t.abrupt("return",{market:d,loading:!1});case 12:n({message:"Market with id ".concat(o.id," not found or closed :("),statusCode:404});case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(2),Object(l.captureException)(t.t0),t.abrupt("return",n({message:"Error fetching order: "+t.t0,statusCode:500}));case 19:case"end":return t.stop()}},t,null,[[2,15]])})),function(t){return L.apply(this,arguments)}),mounted:function(){var t=this.$refs.bids;setTimeout(function(){t.scrollTop=t.scrollHeight},1e3)},created:(N=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.update(),t.next=3,this.fetchOrders();case 3:this.setDefaultPrice();case 4:case"end":return t.stop()}},t,this)})),function(){return N.apply(this,arguments)}),methods:{setDefaultPrice:function(){this.bids.length?this.price=this.$options.filters.humanFloat(this.sorted_bids[0].unit_price):this.asks.length&&(this.price=this.$options.filters.humanFloat(this.sorted_asks[this.sorted_asks.length-1].unit_price))},changeBuySlider:function(p){0!=this.price&&(this.amount=Math.round(parseFloat(this.eosBalance)/100*p)/this.price,this.update())},changeSellSlider:function(p){0!=this.price&&(this.amount=Math.round(parseFloat(this.tokenBalance)/100*p),this.update())},fetchOrders:(I=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(F.b)(this.market.id),Object(F.c)(this.market.id)]);case 2:e=t.sent,r=Object(n.a)(e,2),o=r[0],c=r[1],this.bids=o.map(function(b){return b.ask=Object(B.c)(b.ask),b.bid=Object(B.c)(b.bid),b}),this.asks=c.map(function(b){return b.ask=Object(B.c)(b.ask),b.bid=Object(B.c)(b.bid),b});case 8:case"end":return t.stop()}},t,this)})),function(){return I.apply(this,arguments)}),setBid:function(t){this.price=this.$options.filters.humanFloat(t.unit_price),this.amount=t.bid.prefix},setAsk:function(t){this.price=this.$options.filters.humanFloat(t.unit_price),this.amount=t.ask.prefix},setTotalBuy:function(){},setTotalSell:function(){},update:function(t){if(!this.amount)return this.price=parseFloat(this.price).toFixed(y.a.PRICE_DIGITS),void(this.amount=Number(0).toFixed(this.market.token.symbol.precision));this.price=parseFloat(this.price).toFixed(y.a.PRICE_DIGITS),this.amount=parseFloat(this.amount).toFixed(this.market.token.symbol.precision)},login:(M=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$store.dispatch("chain/login");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(l.captureException)(t.t0),this.$notify({title:"Loading error",message:t.t0.message,type:"error"});case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}},t,this,[[1,6,10,13]])})),function(){return M.apply(this,arguments)}),cancelOrder:(D=Object(o.a)(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.user){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Pleace login first",type:"info"}));case 2:return r=this.$loading({lock:!0,text:"Wait for Scatter"}),t.prev=3,n=this.order,t.next=7,Object(j.cancelorder)(n.maker,n.id);case 7:this.$notify({title:"Success",message:"Order canceled ".concat(n.id),type:"success"}),this.$router.push({name:"index"}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),Object(l.captureException)(t.t0,{extra:{order:e}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 16:return t.prev=16,r.close(),t.finish(16);case 19:case"end":return t.stop()}},t,this,[[3,11,16,19]])})),function(t){return D.apply(this,arguments)}),fetchOrder:(A=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return A.apply(this,arguments)}),sell:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.chain.scatterConnected){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Pleace connect Scatter",type:"info"}));case 2:if(e=this.$loading({lock:!0,text:"Wait for Scatter"}),!this.$store.state.chain.scatterConnected||this.$store.state.user){t.next=6;break}return t.next=6,this.$store.dispatch("chain/login");case 6:return t.prev=6,t.next=9,Object(j.transfer)(this.market.token.contract,this.user.name,"".concat(this.amount," ").concat(this.market.token.symbol.name),"".concat(this.totalEos," EOS@eosio.token"));case 9:r=t.sent,this.fetchOrders(),this.$alert('<a href="'.concat(y.a.monitor,"/tx/").concat(r.transaction_id,'" target="_blank">Transaction id</a>'),"Transaction complete!",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",callback:function(t){}}),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(6),Object(l.captureException)(t.t0,{extra:{order:this.order}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 19:return t.prev=19,e.close(),t.finish(19);case 22:case"end":return t.stop()}},t,this,[[6,14,19,22]])}));return function(){return t.apply(this,arguments)}}(),buy:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.chain.scatterConnected){t.next=2;break}return t.abrupt("return",this.$notify({title:"Authorization",message:"Pleace connect Scatter",type:"info"}));case 2:if(e=this.$loading({lock:!0,text:"Wait for Scatter"}),!this.$store.state.chain.scatterConnected||this.$store.state.user){t.next=6;break}return t.next=6,this.$store.dispatch("chain/login");case 6:return t.prev=6,t.next=9,Object(j.transfer)("eosio.token",this.user.name,"".concat(this.totalEos," EOS"),"".concat(this.amount," ").concat(this.market.token.str));case 9:r=t.sent,this.fetchOrders(),this.$alert('<a href="'.concat(y.a.monitor,"/tx/").concat(r.transaction_id,'" target="_blank">Transaction id</a>'),"Transaction complete!",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",callback:function(t){}}),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(6),Object(l.captureException)(t.t0,{extra:{order:this.order}}),this.$notify({title:"Place order",message:t.t0.message,type:"error"}),console.log(t.t0);case 19:return t.prev=19,e.close(),t.finish(19);case 22:case"end":return t.stop()}},t,this,[[6,14,19,22]])}));return function(){return t.apply(this,arguments)}}()}},W=(r(590),Object(h.a)(H,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.no_found?r("el-card",{staticClass:"box-card mt-3"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Market: "+t._s(t.market.id))]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"index"})}}},[t._v("Go to main page")])],1),r("div",{staticClass:"text item text-center"},[r("h1",{staticClass:"display-4"},[t._v("Order "+t._s(t.market.id)+" not found or finished")])])]):r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card mt-3"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"index"})}}},[t._v("Go to main page")]),r("div",{staticClass:"row"},[r("div",{staticClass:"el-col ml-2"},[r("TokenImage",{staticClass:"mr-2 ml-1",attrs:{src:t.$tokenLogo(t.market.token.symbol.name,t.market.token.symbol.name),height:"45"}})],1),r("div",{staticClass:"el-col d-flex align-items-center"},[r("h1",{staticClass:"display-4"},[t._v("Trade "+t._s(t.market.token.symbol.name)+"@"),r("a",{attrs:{href:t._f("monitorAccount")(t.market.token.symbol.contract),target:"_blank"}},[t._v(t._s(t.market.token.contract))]),r("span",[t._v(" for EOS")])])])])],1),r("div",{staticClass:"text item"},[r("div",{staticClass:"row trade-window"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"overflowbox no-bottom-border"},[r("div",{staticClass:"blist"},[r("div",{staticClass:"ltd d-flex justify-content-around"},[r("span",[t._v("Price (EOS)")]),r("span",[t._v("Amt("+t._s(t.market.token.symbol.name)+")")]),r("span",[t._v("Total (EOS)")])])])]),r("div",{staticClass:"overflowbox"},[r("div",{ref:"bids",staticClass:"blist text-danger"},[t._l(t.sorted_asks,function(e){return r("div",{staticClass:"ltd d-flex justify-content-around",on:{click:function(r){return t.setBid(e)}}},[r("span",[t._v(t._s(t._f("humanFloat")(e.unit_price)))]),r("span",[t._v(t._s(e.bid.quantity))]),r("span",[t._v(t._s(e.ask.quantity))])])}),0==t.sorted_asks.length?r("div",{staticClass:"ltd d-flex justify-content-around"},[r("span"),r("span",[t._v("No asks")]),r("span")]):t._e()],2),r("div",{staticClass:"bg-light text-center p-1"},[t.bids.length?r("b",{staticClass:"text-success"},[t._v(t._s(t.sorted_bids[0].price))]):t._e()]),r("div",{staticClass:"blist text-success"},[t._l(t.sorted_bids,function(e){return r("div",{staticClass:"ltd d-flex",on:{click:function(r){return t.setAsk(e)}}},[r("span",[t._v(t._s(t._f("humanFloat")(e.unit_price)))]),r("span",[t._v(t._s(e.ask.quantity))]),r("span",[t._v(t._s(e.bid.quantity))])])}),0==t.sorted_bids.length?r("div",{staticClass:"ltd d-flex justify-content-around"},[r("span"),r("span",[t._v("No bids")]),r("span")]):t._e()],2)])]),r("div",{staticClass:"col-7"},[r("el-tabs",{staticClass:"h-100"},[r("el-tab-pane",{attrs:{label:"Limit trade"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.wrongPrice,expression:"wrongPrice"}],attrs:{title:"Amounts does't match unit price!",type:"info","show-icon":"",closable:!1}},[t._v("Please change price or amount."),r("a",{staticClass:"ml-1",attrs:{href:"#"},on:{click:t.unitPriceInfo}},[t._v(" WTF ?")])])],1)]),r("div",{staticClass:"row p-2"},[r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex label mb-3"},[r("span",{staticClass:"text-success"},[t._v("Buy "+t._s(t.market.token.symbol.name))]),r("span",{staticClass:"text-mutted small align-self-end ml-auto"},[t._v("balance: "+t._s(t.eosBalance))])]),r("el-form",{ref:"form",attrs:{rules:t.rules,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"Price"}},[r("el-input",{attrs:{type:"number",min:"0.00000001",step:"0.00000001",clearable:""},on:{change:t.update},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{attrs:{label:"Amount"}},[r("el-input",{attrs:{type:"number",clearable:""},on:{change:t.update},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.market.token.symbol.name))])])],1),r("el-form-item",[r("el-slider",{attrs:{step:25,"show-stops":"",marks:{0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"}},on:{input:t.changeBuySlider}})],1),r("el-form-item",{staticClass:"mt-5",attrs:{label:"Total",prop:"total","inline-message":!0}},[r("el-input",{attrs:{type:"number"},on:{change:t.setTotalBuy},model:{value:t.totalEos,callback:function(e){t.totalEos=e},expression:"totalEos"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{staticClass:"mt-2"},[r("el-button",{staticClass:"w-100",attrs:{type:"success"},on:{click:t.buy}},[t._v("Buy "+t._s(t.market.token.str))])],1)],1)],1),r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex label mb-3"},[r("span",{staticClass:"text-danger"},[t._v("Sell "+t._s(t.market.token.symbol.name))]),r("span",{staticClass:"text-mutted small align-self-end ml-auto"},[t._v("balance: "+t._s(t.tokenBalance))])]),r("el-form",{ref:"form",attrs:{rules:t.rules,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"Price"}},[r("el-input",{attrs:{type:"number",min:"0",step:"0.0001",value:"0",clearable:""},on:{change:t.update},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}},[r("span",{staticClass:"mr-1 ml-2",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{attrs:{label:"Amount"}},[r("el-input",{attrs:{type:"number",clearable:""},on:{change:t.update},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.market.token.symbol.name))])])],1),r("el-form-item",[r("el-slider",{attrs:{step:25,"show-stops":"",marks:{0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"}},on:{input:t.changeSellSlider}})],1),r("el-form-item",{staticClass:"mt-5",attrs:{label:"Total",prop:"total","inline-message":!0}},[r("el-input",{attrs:{type:"number"},on:{change:t.setTotalSell},model:{value:t.totalEos,callback:function(e){t.totalEos=e},expression:"totalEos"}},[r("span",{staticClass:"mr-1",attrs:{slot:"suffix"},slot:"suffix"},[t._v("EOS")])])],1),r("el-form-item",{staticClass:"mt-2"},[r("el-button",{staticClass:"w-100",attrs:{type:"danger"},on:{click:t.sell}},[t._v("Sell "+t._s(t.market.token.str))])],1)],1)],1)])]),r("el-tab-pane",{attrs:{label:"Market trade"}},[r("market-trade",{attrs:{market:t.market,"eos-balance":t.eosBalance,"token-balance":t.tokenBalance},on:{update:t.fetchOrders}})],1)],1)],1)]),r("hr"),r("div",{staticClass:"el-row"},[r("div",{staticClass:"el-col"},[r("my-orders",{attrs:{market:t.market_id,asks:t.asks,bids:t.bids},on:{update:t.fetchOrders}})],1)])])])},[],!1,null,null,null));e.default=W.exports}}]);